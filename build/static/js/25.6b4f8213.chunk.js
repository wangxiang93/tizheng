(this["webpackJsonp_react-admin"]=this["webpackJsonp_react-admin"]||[]).push([[25],{980:function(e,t,n){"use strict";n.r(t);n(310);var a=n(171),c=(n(107),n(39)),i=n(5),r=n.n(i),u=n(11),s=n(26),l=(n(369),n(232)),j=n(49),b=n(0),o=n(15),d=n(170),O=(n(996),n(998)),h=(n(997),n(999)),f=n(9),x=Object(d.a)({modal:{title:function(e){var t;return null!==e&&void 0!==e&&null!==(t=e.record)&&void 0!==t&&t.isDetail?"\u67e5\u770b\u7528\u6237":e.isEdit?"\u7f16\u8f91\u7528\u6237":"\u65b0\u589e\u7528\u6237"},width:"40%",top:100}})((function(e){var t=e.record,n=e.isEdit,a=e.onOk,i=e.onCancel,d=Object(b.useState)(!1),x=Object(j.a)(d,2),m=x[0],p=x[1],g=l.a.useForm(),v=Object(j.a)(g,1)[0],S=null===t||void 0===t?void 0:t.isDetail;Object(b.useMemo)((function(){return{id:null===t||void 0===t?void 0:t.id}}),[t]);v.setFieldsValue(t);var k=e.ajax.useGet("/depart/queryListByPage").run,y=Object(b.useState)([]),z=Object(j.a)(y,2),C=z[0],w=z[1];Object(b.useEffect)((function(){Object(u.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k();case 2:t=e.sent,w((function(){return t.content||[]}));case 4:case"end":return e.stop()}}),e)})))()}),[k]);var q=e.ajax.usePost("/subjectManage/save",null,{setLoading:p,successTip:"\u521b\u5efa\u6210\u529f\uff01"}).run,F=e.ajax.usePost("/subjectManage/update",null,{setLoading:p,successTip:"\u4fee\u6539\u6210\u529f\uff01"}).run,M=Object(b.useCallback)(function(){var e=Object(u.a)(r.a.mark((function e(t){var c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=Object(s.a)({},t),!n){e.next=6;break}return e.next=4,F(c);case 4:e.next=8;break;case 6:return e.next=8,q(c);case 8:a();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,F,q,a]),N=S,T={labelCol:{flex:"140px"},disabled:N};return Object(f.jsx)(l.a,{form:v,name:"roleEdit",onFinish:M,initialValues:{},children:Object(f.jsxs)(o.k,{width:300,loading:m,okText:"\u4fdd\u5b58",okHtmlType:"submit",cancelText:"\u53d6\u6d88",onCancel:function(){return i()},footer:N?Object(f.jsx)(c.a,{onClick:i,children:"\u5173\u95ed"}):void 0,children:[n?Object(f.jsx)(o.e,{hidden:!0,name:"id"}):null,Object(f.jsxs)(O.a,{gutter:24,children:[Object(f.jsx)(h.a,{span:24,children:Object(f.jsx)(o.e,Object(s.a)(Object(s.a)({},T),{},{label:"\u4e13\u9898\u540d\u79f0",name:"zhuantimingcheng",required:!0,noSpace:!0}))}),Object(f.jsx)(h.a,{span:24,children:Object(f.jsx)(o.e,Object(s.a)(Object(s.a)({},T),{},{type:"select-tree",label:"\u4e13\u9898\u8d1f\u8d23\u90e8\u95e8",name:"zhuantifuzebumen",required:!0,noSpace:!0,fieldKey:"id",fieldNames:{label:"bumengmingcheng",value:"bumengmingcheng",children:"children"},treeData:C}))})," ",Object(f.jsxs)(h.a,{span:24,children:[Object(f.jsx)(o.e,Object(s.a)(Object(s.a)({},T),{},{label:"\u8d1f\u8d23\u4eba",required:!0,name:"fuzeren",noSpace:!0}))," "]}),Object(f.jsxs)(h.a,{span:24,children:[Object(f.jsx)(o.e,Object(s.a)(Object(s.a)({},T),{},{label:"\u8d1f\u8d23\u4eba\u8054\u7cfb\u65b9\u5f0f",required:!0,name:"fuzerenlianxifangshi",noSpace:!0}))," "]}),Object(f.jsx)(h.a,{span:24,children:Object(f.jsx)(o.e,Object(s.a)(Object(s.a)({},T),{},{type:"select-tree",label:"\u76f8\u5173\u90e8\u95e8",required:!0,name:"xiangguanbumen",noSpace:!0,fieldKey:"id",fieldNames:{label:"bumengmingcheng",value:"bumengmingcheng",children:"children"},treeData:C}))}),Object(f.jsxs)(h.a,{span:24,children:[Object(f.jsx)(o.e,Object(s.a)(Object(s.a)({type:"textarea"},T),{},{label:"\u653f\u7b56\u94fe\u63a5",required:!0,name:"zhengcelianjie",noSpace:!0}))," "]}),Object(f.jsxs)(h.a,{span:24,children:[Object(f.jsx)(o.e,Object(s.a)(Object(s.a)({type:"textarea"},T),{},{label:"\u653f\u7b56\u63cf\u8ff0",required:!0,name:"zhuantimiaoshu",noSpace:!0}))," "]})]})]})})}));t.default=Object(d.a)({path:"/subjectManage/allSubject"})((function(e){var t=Object(b.useState)(!1),n=Object(j.a)(t,2),i=n[0],d=n[1],O=Object(b.useState)(1),h=Object(j.a)(O,2),m=h[0],p=h[1],g=Object(b.useState)(20),v=Object(j.a)(g,2),S=v[0],k=v[1],y=Object(b.useState)({}),z=Object(j.a)(y,2),C=z[0],w=z[1],q=Object(b.useState)(!1),F=Object(j.a)(q,2),M=F[0],N=F[1],T=Object(b.useState)(null),D=Object(j.a)(T,2),E=D[0],L=D[1],P=l.a.useForm(),I=Object(j.a)(P,1)[0],K=Object(b.useMemo)((function(){return Object(s.a)(Object(s.a)({},C),{},{pageNum:m,pageSize:S})}),[C,m,S]),V=Object(b.useCallback)((function(){w(I.getFieldsValue())}),[I]),B=e.ajax.useGet("/subjectManage/queryListByPage",K,[K],{setLoading:d,formatResult:function(e){return{dataSource:(null===e||void 0===e?void 0:e.content)||[],total:(null===e||void 0===e?void 0:e.totalElements)||0}}}).data,G=(B=void 0===B?{}:B).dataSource,H=B.total,J=e.ajax.useDel("/subjectManage/:id",null,{setLoading:d,successTip:"\u5220\u9664\u6210\u529f\uff01"}).run,R=[{title:"\u4e13\u9898\u540d\u79f0",dataIndex:"zhuantimingcheng"},{title:"\u4e13\u9898\u8d1f\u8d23\u90e8\u95e8",dataIndex:"zhuantifuzebumen"},{title:"\u8d1f\u8d23\u4eba",dataIndex:"fuzeren"},{title:"\u76f8\u5173\u90e8\u95e8",dataIndex:"xiangguanbumen"},{title:"\u4e13\u9898\u6307\u6807\u6570(\u53bb\u91cd)",dataIndex:"zhuantizhibiaoshu"},{title:"\u64cd\u4f5c",key:"operator",width:200,render:function(e,t){var n=t.id,a=t.zhuantimingcheng,c=[{label:"\u67e5\u770b",onClick:function(){return L(Object(s.a)(Object(s.a)({},t),{},{isDetail:!0}))||N(!0)}},{label:"\u4fee\u6539",onClick:function(){return L(t)||N(!0)}},{label:"\u914d\u7f6e",onClick:function(){return L(t)||N(!0)}},{label:"\u5220\u9664",color:"red",confirm:{title:"\u60a8\u786e\u5b9a\u5220\u9664\u300c".concat(a,"\u300d\u5417\uff1f"),onConfirm:function(){return _(n)}}}];return Object(f.jsx)(o.l,{items:c})}}],_=Object(b.useCallback)(function(){var e=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(t);case 2:V();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[J,V]),A={style:{width:300}},Q=Object(b.useState)([]),U=Object(j.a)(Q,2),W=U[0],X=U[1],Y=Object(b.useCallback)((function(e){X(e)}),[]);return Object(f.jsxs)(o.m,{loading:i,children:[Object(f.jsx)(o.o,{children:Object(f.jsxs)(l.a,{name:"user",layout:"inline",form:I,initialValues:{position:"01"},onFinish:function(e){return p(1)||w(e)},children:[Object(f.jsx)(o.e,Object(s.a)(Object(s.a)({},A),{},{label:"\u4e13\u9898\u540d\u79f0",name:"zhuantimingcheng"})),Object(f.jsx)(o.e,Object(s.a)(Object(s.a)({},A),{},{label:"\u4e13\u9898\u8d1f\u8d23\u90e8\u95e8",name:"zhuantifuzebumen"})),Object(f.jsx)(o.e,Object(s.a)(Object(s.a)({},A),{},{label:"\u8d1f\u8d23\u4eba",name:"fuzeren"})),Object(f.jsx)(o.e,{children:Object(f.jsxs)(a.b,{children:[Object(f.jsx)(c.a,{type:"primary",htmlType:"submit",children:"\u67e5\u8be2"}),Object(f.jsx)(c.a,{onClick:function(){return I.resetFields()},children:"\u91cd\u7f6e"})]})})]})}),Object(f.jsxs)(o.q,{children:[Object(f.jsx)(c.a,{type:"primary",onClick:function(){return L(null)||N(!0)},children:"\u65b0\u589e\u4e13\u9898"}),Object(f.jsx)(c.a,{danger:!0,onClick:function(){return L(null)||N(!0)},children:"\u6279\u91cf\u5220\u9664"})]}),Object(f.jsx)(o.p,{serialNumber:!0,pageNum:m,pageSize:S,fitHeight:!0,dataSource:G,columns:R,rowSelection:{selectedRowKeys:W,onChange:Y},rowKey:"id"}),Object(f.jsx)(o.n,{total:H,pageNum:m,pageSize:S,onPageNumChange:p,onPageSizeChange:function(e){return p(1)||k(e)}}),Object(f.jsx)(x,{visible:M,record:E,isEdit:!!E,onOk:function(){N(!1),V()},onCancel:function(){return N(!1)}})]})}))},996:function(e,t,n){"use strict";n(35),n(510)},997:function(e,t,n){"use strict";n(35),n(510)},998:function(e,t,n){"use strict";var a=n(484);t.a=a.a},999:function(e,t,n){"use strict";var a=n(288);t.a=a.a}}]);
//# sourceMappingURL=25.6b4f8213.chunk.js.map