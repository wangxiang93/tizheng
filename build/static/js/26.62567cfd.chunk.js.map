{"version":3,"sources":["pages/subjectManage/mySubject/ConfigModal.jsx","pages/subjectManage/mySubject/EditModal.jsx","pages/subjectManage/mySubject/index.jsx","../node_modules/antd/es/row/style/index.js","../node_modules/antd/es/col/style/index.js","../node_modules/antd/es/row/index.js","../node_modules/antd/es/col/index.js"],"names":["config","modal","title","props","width","top","useState","loading","setLoading","pageNum","setPageNum","pageSize","setPageSize","onCancel","record","isEdit","onOk","selectedRowKeys","setSelectedRowKeys","handleSelectedRowKeysChange","useCallback","params","useMemo","ajax","useGet","formatResult","res","dataSource","content","total","totalElements","data","okText","okHtmlType","cancelText","columns","dataIndex","rowSelection","onChange","rowKey","onPageNumChange","onPageSizeChange","isDetail","useForm","form","id","setFieldsValue","getDepartList","run","departOptions","setDepartOptions","useEffect","a","save","usePost","successTip","update","handleSubmit","values","disabled","layout","labelCol","flex","name","onFinish","initialValues","footer","onClick","undefined","hidden","gutter","span","label","required","noSpace","type","fieldKey","fieldNames","value","children","treeData","path","conditions","setConditions","visible","setVisible","setRecord","refreshSearch","getFieldsValue","deleteRecord","useDel","key","render","zhuantimingcheng","items","setConfigRecord","setConfigVisible","color","confirm","onConfirm","handleDelete","queryItem","style","ConfigVisible","ConfigRecord","position","htmlType","resetFields","danger","serialNumber","fitHeight","EditModal","ConfigModal","Row","Col"],"mappings":"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","file":"static/js/26.62567cfd.chunk.js","sourcesContent":["/*\r\n * @Author: dengliangbin 410411236@qq.com\r\n * @Date: 2023-03-06 15:00:30\r\n * @LastEditors: dengliangbin 410411236@qq.com\r\n * @LastEditTime: 2023-03-06 15:57:23\r\n * @FilePath: \\ahooks\\src\\pages\\subjectManage\\mySubject\\ConfigModal.jsx\r\n * @Description:\r\n */\r\nimport {useCallback, useState, useEffect, useMemo} from 'react';\r\nimport { Button} from 'antd';\r\nimport {ModalContent, Table, Pagination, Operator} from '@ra-lib/admin';\r\nimport config from 'src/commons/config-hoc';\r\nexport default config({\r\n    modal: {\r\n        title: (props) => {\r\n            return '添加指标';\r\n        },\r\n        width: '80%',\r\n        top: 30,\r\n    },\r\n})(function Edit(props) {\r\n    const [loading, setLoading] = useState(false);\r\n    const [pageNum, setPageNum] = useState(1);\r\n    const [pageSize, setPageSize] = useState(20);\r\n    const {record, isEdit, onOk, onCancel} = props;\r\n    const [visible, setVisible] = useState(false);\r\n    // 表格多选\r\n    const [selectedRowKeys, setSelectedRowKeys] = useState([]);\r\n    const handleSelectedRowKeysChange = useCallback((selectedRowKeys) => {\r\n        setSelectedRowKeys(selectedRowKeys);\r\n    }, []);\r\n    const params = useMemo(() => {\r\n        return {\r\n            pageNum,\r\n            pageSize,\r\n        };\r\n    }, [ pageNum, pageSize]);\r\n    // 获取列表\r\n    const {data: {dataSource, total} = {}} = props.ajax.useGet('/indexTable/queryListByPage', params, [params], {\r\n        setLoading,\r\n        formatResult: (res) => {\r\n            return {\r\n                dataSource: res?.content || [],\r\n                total: res?.totalElements || 0,\r\n            };\r\n        },\r\n    });\r\n    const columns = [\r\n        {title: '指标名称', dataIndex: 'name'},\r\n        {title: '指标状态', dataIndex: 'status'},\r\n        {title: '指标来源部门', dataIndex: 'sourceDepart'},\r\n        {title: '指标来源科室', dataIndex: 'sourceKeshi'},\r\n        {title: '指标负责部门', dataIndex: 'fuzeDepart'},\r\n        {title: '指标负责人', dataIndex: 'fuzeren'},\r\n        {title: '负责人联系方式', dataIndex: 'phone'},\r\n        {title: '指标含义', dataIndex: 'meaning'},\r\n        {title: '统计周期', dataIndex: 'tongjizhouqi'},\r\n        {title: '更新时间', dataIndex: 'updatedAt'},\r\n    ];\r\n    return (\r\n        <ModalContent\r\n            loading={loading}\r\n            okText=\"保存\"\r\n            okHtmlType=\"submit\"\r\n            cancelText=\"取消\"\r\n            onOk={onCancel}\r\n            onCancel={onCancel}\r\n        >\r\n            <Table\r\n                pageNum={pageNum}\r\n                pageSize={pageSize}\r\n                dataSource={dataSource}\r\n                columns={columns}\r\n                rowSelection={{\r\n                    selectedRowKeys: selectedRowKeys,\r\n                    onChange: handleSelectedRowKeysChange,\r\n                }}\r\n                rowKey=\"id\"\r\n            />\r\n            <Pagination\r\n                total={total}\r\n                pageNum={pageNum}\r\n                pageSize={pageSize}\r\n                onPageNumChange={setPageNum}\r\n                onPageSizeChange={(pageSize) => setPageNum(1) || setPageSize(pageSize)}\r\n            />\r\n        </ModalContent>\r\n    );\r\n});\r\n","import {useCallback, useMemo, useState, useEffect} from 'react';\r\nimport {Form, Row, Col, Card, Button} from 'antd';\r\nimport {ModalContent, FormItem, Content, validateRules, useDebounceValidator} from '@ra-lib/admin';\r\nimport config from 'src/commons/config-hoc';\r\n\r\nexport default config({\r\n    modal: {\r\n        title: (props) => {\r\n            if (props?.record?.isDetail) return '查看专题';\r\n            return props.isEdit ? '编辑专题' : '新增专题';\r\n        },\r\n        width: '40%',\r\n        top: 100,\r\n    },\r\n})(function Edit(props) {\r\n    const {record, isEdit, onOk, onCancel} = props;\r\n    const [loading, setLoading] = useState(false);\r\n    const [form] = Form.useForm();\r\n    const isDetail = record?.isDetail;\r\n\r\n    const params = useMemo(() => {\r\n        return {id: record?.id};\r\n    }, [record]);\r\n\r\n    // 编辑时，回显详情数据\r\n    form.setFieldsValue(record);\r\n    // 获取部门下拉\r\n\r\n    let {run: getDepartList} = props.ajax.useGet('/depart/queryListByPage');\r\n    const [departOptions, setDepartOptions] = useState([]);\r\n    useEffect(() => {\r\n        (async () => {\r\n            let res = await getDepartList();\r\n            setDepartOptions(() => res.content || []);\r\n        })();\r\n    }, [getDepartList]);\r\n    const {run: save} = props.ajax.usePost('/subjectManage/save', null, {setLoading, successTip: '创建成功！'});\r\n    const {run: update} = props.ajax.usePost('/subjectManage/update', null, {setLoading, successTip: '修改成功！'});\r\n\r\n    const handleSubmit = useCallback(\r\n        async (values) => {\r\n            const params = {\r\n                ...values,\r\n            };\r\n            if (isEdit) {\r\n                await update(params);\r\n            } else {\r\n                await save(params);\r\n            }\r\n\r\n            onOk();\r\n        },\r\n        [isEdit, update, save, onOk],\r\n    );\r\n\r\n    const disabled = isDetail;\r\n    const layout = {\r\n        labelCol: {flex: '140px'},\r\n        disabled,\r\n    };\r\n    const colLayout = {\r\n        xs: {span: 12},\r\n        sm: {span: 12},\r\n    };\r\n    return (\r\n        <Form form={form} name=\"roleEdit\" onFinish={handleSubmit} initialValues={{}}>\r\n            <ModalContent\r\n                width={300}\r\n                loading={loading}\r\n                okText=\"保存\"\r\n                okHtmlType=\"submit\"\r\n                cancelText=\"取消\"\r\n                onCancel={() => onCancel()}\r\n                footer={disabled ? <Button onClick={onCancel}>关闭</Button> : undefined}\r\n            >\r\n                {isEdit ? <FormItem hidden name=\"id\" /> : null}\r\n                <Row gutter={24}>\r\n                    <Col span={24}>\r\n                        <FormItem\r\n                            {...layout}\r\n                            label=\"专题名称\"\r\n                            name=\"zhuantimingcheng\"\r\n                            required\r\n                            noSpace\r\n                            // rules={[{ validator: checkAccount }]}\r\n                        />\r\n                    </Col>\r\n                    <Col span={24}>\r\n                        <FormItem\r\n                            {...layout}\r\n                            type=\"select-tree\"\r\n                            label=\"专题负责部门\"\r\n                            name=\"zhuantifuzebumen\"\r\n                            required\r\n                            noSpace\r\n                            fieldKey=\"id\"\r\n                            fieldNames={{label: 'bumengmingcheng', value: 'bumengmingcheng', children: 'children'}}\r\n                            treeData={departOptions}\r\n                        />\r\n                    </Col>{' '}\r\n                    <Col span={24}>\r\n                        <FormItem {...layout} label=\"负责人\" required name=\"fuzeren\" noSpace />{' '}\r\n                    </Col>\r\n                    <Col span={24}>\r\n                        <FormItem {...layout} label=\"负责人联系方式\" required name=\"fuzerenlianxifangshi\" noSpace />{' '}\r\n                    </Col>\r\n                    <Col span={24}>\r\n                        <FormItem\r\n                            {...layout}\r\n                            type=\"select-tree\"\r\n                            label=\"相关部门\"\r\n                            required\r\n                            name=\"xiangguanbumen\"\r\n                            noSpace\r\n                            fieldKey=\"id\"\r\n                            fieldNames={{label: 'bumengmingcheng', value: 'bumengmingcheng', children: 'children'}}\r\n                            treeData={departOptions}\r\n                        />\r\n                    </Col>\r\n                    <Col span={24}>\r\n                        <FormItem type='textarea' {...layout} label=\"政策链接\" required name=\"zhengcelianjie\" noSpace />{' '}\r\n                    </Col>\r\n                    <Col span={24}>\r\n                        <FormItem type='textarea' {...layout} label=\"政策描述\" required name=\"zhuantimiaoshu\" noSpace />{' '}\r\n                    </Col>\r\n                    \r\n                </Row>\r\n            </ModalContent>\r\n        </Form>\r\n    );\r\n});\r\n","/*\r\n * @Author: dengliangbin 410411236@qq.com\r\n * @Date: 2023-02-20 16:40:10\r\n * @LastEditors: dengliangbin 410411236@qq.com\r\n * @LastEditTime: 2023-03-06 15:05:20\r\n * @FilePath: \\ahooks\\src\\pages\\subjectManage\\mySubject\\index.jsx\r\n * @Description: 我的专题\r\n */\r\nimport {useState, useMemo, useCallback, useEffect} from 'react';\r\nimport {Button, Form, Space} from 'antd';\r\nimport {PageContent, QueryBar, FormItem, Table, Pagination, Operator, ToolBar} from '@ra-lib/admin';\r\nimport config from 'src/commons/config-hoc';\r\nimport ConfigModal from './ConfigModal';\r\nimport EditModal from './EditModal';\r\n\r\nexport default config({\r\n    path: '/subjectManage/mySubject',\r\n})(function User(props) {\r\n    const [loading, setLoading] = useState(false);\r\n    const [pageNum, setPageNum] = useState(1);\r\n    const [pageSize, setPageSize] = useState(20);\r\n    const [conditions, setConditions] = useState({});\r\n    const [visible, setVisible] = useState(false);\r\n    const [record, setRecord] = useState(null);\r\n    const [form] = Form.useForm();\r\n\r\n    const params = useMemo(() => {\r\n        return {\r\n            ...conditions,\r\n            pageNum,\r\n            pageSize,\r\n        };\r\n    }, [conditions, pageNum, pageSize]);\r\n\r\n    // 使用现有查询条件，重新发起请求\r\n    const refreshSearch = useCallback(() => {\r\n        setConditions(form.getFieldsValue());\r\n    }, [form]);\r\n\r\n    // 获取列表\r\n    const {data: {dataSource, total} = {}} = props.ajax.useGet('/subjectManage/queryListByPage', params, [params], {\r\n        setLoading,\r\n        formatResult: (res) => {\r\n            return {\r\n                dataSource: res?.content || [],\r\n                total: res?.totalElements || 0,\r\n            };\r\n        },\r\n    });\r\n\r\n    // 删除\r\n    const {run: deleteRecord} = props.ajax.useDel('/subjectManage/:id', null, {setLoading, successTip: '删除成功！'});\r\n\r\n    const columns = [\r\n        {title: '专题名称', dataIndex: 'zhuantimingcheng'},\r\n        {title: '专题负责部门', dataIndex: 'zhuantifuzebumen'},\r\n        {title: '负责人', dataIndex: 'fuzeren'},\r\n        {title: '相关部门', dataIndex: 'xiangguanbumen'},\r\n        {title: '专题指标数(去重)', dataIndex: 'zhuantizhibiaoshu'},\r\n        {\r\n            title: '操作',\r\n            key: 'operator',\r\n            width: 200,\r\n            render: (value, record) => {\r\n                const {id, zhuantimingcheng} = record;\r\n                const items = [\r\n                    {\r\n                        label: '查看',\r\n                        onClick: () => setRecord({...record, isDetail: true}) || setVisible(true),\r\n                    },\r\n                    {\r\n                        label: '修改',\r\n                        onClick: () => setRecord(record) || setVisible(true),\r\n                    },\r\n                    {\r\n                        label: '配置',\r\n                        onClick: () => setConfigRecord(record) || setConfigVisible(true),\r\n                    },\r\n                    {\r\n                        label: '删除',\r\n                        color: 'red',\r\n                        confirm: {\r\n                            title: `您确定删除「${zhuantimingcheng}」吗？`,\r\n                            onConfirm: () => handleDelete(id),\r\n                        },\r\n                    },\r\n                ];\r\n\r\n                return <Operator items={items} />;\r\n            },\r\n        },\r\n    ];\r\n\r\n    const handleDelete = useCallback(\r\n        async (id) => {\r\n            await deleteRecord(id);\r\n            // 触发列表更新\r\n            refreshSearch();\r\n        },\r\n        [deleteRecord, refreshSearch],\r\n    );\r\n\r\n    const queryItem = {\r\n        style: {width: 300},\r\n    };\r\n    const queryItemDaye = {\r\n        style: {width: 300},\r\n    };\r\n    // 表格多选\r\n    const [selectedRowKeys, setSelectedRowKeys] = useState([]);\r\n    const handleSelectedRowKeysChange = useCallback((selectedRowKeys) => {\r\n        setSelectedRowKeys(selectedRowKeys);\r\n    }, []);\r\n    // 添加指标弹窗数据\r\n    const [ConfigVisible, setConfigVisible] = useState(false);\r\n    const [ConfigRecord, setConfigRecord] = useState(null);\r\n    return (\r\n        <PageContent loading={loading}>\r\n            <QueryBar>\r\n                <Form\r\n                    name=\"user\"\r\n                    layout=\"inline\"\r\n                    form={form}\r\n                    initialValues={{position: '01'}}\r\n                    onFinish={(values) => setPageNum(1) || setConditions(values)}\r\n                >\r\n                    <FormItem {...queryItem} label=\"专题名称\" name=\"zhuantimingcheng\" />\r\n                    <FormItem {...queryItem} label=\"专题负责部门\" name=\"zhuantifuzebumen\" />\r\n                    <FormItem {...queryItem} label=\"负责人\" name=\"fuzeren\" />\r\n\r\n                    <FormItem>\r\n                        <Space>\r\n                            <Button type=\"primary\" htmlType=\"submit\">\r\n                                查询\r\n                            </Button>\r\n                            <Button onClick={() => form.resetFields()}>重置</Button>\r\n                        </Space>\r\n                    </FormItem>\r\n                </Form>\r\n            </QueryBar>\r\n            <ToolBar>\r\n                <Button type=\"primary\" onClick={() => setRecord(null) || setVisible(true)}>\r\n                    新增专题\r\n                </Button>\r\n                <Button danger onClick={() => setRecord(null) || setVisible(true)}>\r\n                    批量删除\r\n                </Button>\r\n            </ToolBar>\r\n            <Table\r\n                serialNumber\r\n                pageNum={pageNum}\r\n                pageSize={pageSize}\r\n                fitHeight\r\n                dataSource={dataSource}\r\n                columns={columns}\r\n                rowSelection={{\r\n                    selectedRowKeys: selectedRowKeys,\r\n                    onChange: handleSelectedRowKeysChange,\r\n                }}\r\n                rowKey=\"id\"\r\n            />\r\n            <Pagination\r\n                total={total}\r\n                pageNum={pageNum}\r\n                pageSize={pageSize}\r\n                onPageNumChange={setPageNum}\r\n                onPageSizeChange={(pageSize) => setPageNum(1) || setPageSize(pageSize)}\r\n            />\r\n            <EditModal\r\n                visible={visible}\r\n                record={record}\r\n                isEdit={!!record}\r\n                onOk={() => {\r\n                    setVisible(false);\r\n                    refreshSearch();\r\n                }}\r\n                onCancel={() => setVisible(false)}\r\n            />\r\n            <ConfigModal\r\n                visible={ConfigVisible}\r\n                record={ConfigRecord}\r\n                isEdit={!!ConfigRecord}\r\n                onOk={() => {\r\n                    setConfigVisible(false);\r\n                    refreshSearch();\r\n                }}\r\n                onCancel={() => setConfigVisible(false)}\r\n            />\r\n        </PageContent>\r\n    );\r\n});\r\n","import '../../style/default.less'; // style dependencies\n// deps-lint-skip: grid\n\nimport '../../grid/style';","import '../../style/default.less'; // style dependencies\n// deps-lint-skip: grid\n\nimport '../../grid/style';","import { Row } from '../grid';\nexport default Row;","import { Col } from '../grid';\nexport default Col;"],"sourceRoot":""}