(this["webpackJsonp_react-admin"]=this["webpackJsonp_react-admin"]||[]).push([[26],{973:function(e,t,n){"use strict";n.r(t);n(310);var a=n(171),c=(n(107),n(39)),i=n(5),u=n.n(i),r=n(11),s=n(26),l=(n(369),n(232)),o=n(49),j=n(0),b=n(15),d=n(170),O=n(9),x=Object(d.a)({modal:{title:function(e){return"\u6dfb\u52a0\u6307\u6807"},width:"80%",top:30}})((function(e){var t=Object(j.useState)(!1),n=Object(o.a)(t,2),a=n[0],c=n[1],i=Object(j.useState)(1),u=Object(o.a)(i,2),r=u[0],s=u[1],l=Object(j.useState)(20),d=Object(o.a)(l,2),x=d[0],m=d[1],f=(e.record,e.isEdit,e.onOk,e.onCancel),h=Object(j.useState)(!1),p=Object(o.a)(h,2),g=(p[0],p[1],Object(j.useState)([])),S=Object(o.a)(g,2),v=S[0],k=S[1],y=Object(j.useCallback)((function(e){k(e)}),[]),z=Object(j.useMemo)((function(){return{pageNum:r,pageSize:x}}),[r,x]),C=e.ajax.useGet("/indexTable/queryListByPage",z,[z],{setLoading:c,formatResult:function(e){return{dataSource:(null===e||void 0===e?void 0:e.content)||[],total:(null===e||void 0===e?void 0:e.totalElements)||0}}}).data,w=(C=void 0===C?{}:C).dataSource,I=C.total;return Object(O.jsxs)(b.k,{loading:a,okText:"\u4fdd\u5b58",okHtmlType:"submit",cancelText:"\u53d6\u6d88",onOk:f,onCancel:f,children:[Object(O.jsx)(b.p,{pageNum:r,pageSize:x,dataSource:w,columns:[{title:"\u6307\u6807\u540d\u79f0",dataIndex:"name"},{title:"\u6307\u6807\u72b6\u6001",dataIndex:"status"},{title:"\u6307\u6807\u6765\u6e90\u90e8\u95e8",dataIndex:"sourceDepart"},{title:"\u6307\u6807\u6765\u6e90\u79d1\u5ba4",dataIndex:"sourceKeshi"},{title:"\u6307\u6807\u8d1f\u8d23\u90e8\u95e8",dataIndex:"fuzeDepart"},{title:"\u6307\u6807\u8d1f\u8d23\u4eba",dataIndex:"fuzeren"},{title:"\u8d1f\u8d23\u4eba\u8054\u7cfb\u65b9\u5f0f",dataIndex:"phone"},{title:"\u6307\u6807\u542b\u4e49",dataIndex:"meaning"},{title:"\u7edf\u8ba1\u5468\u671f",dataIndex:"tongjizhouqi"},{title:"\u66f4\u65b0\u65f6\u95f4",dataIndex:"updatedAt"}],rowSelection:{selectedRowKeys:v,onChange:y},rowKey:"id"}),Object(O.jsx)(b.n,{total:I,pageNum:r,pageSize:x,onPageNumChange:s,onPageSizeChange:function(e){return s(1)||m(e)}})]})})),m=(n(996),n(998)),f=(n(997),n(999)),h=Object(d.a)({modal:{title:function(e){var t;return null!==e&&void 0!==e&&null!==(t=e.record)&&void 0!==t&&t.isDetail?"\u67e5\u770b\u4e13\u9898":e.isEdit?"\u7f16\u8f91\u4e13\u9898":"\u65b0\u589e\u4e13\u9898"},width:"40%",top:100}})((function(e){var t=e.record,n=e.isEdit,a=e.onOk,i=e.onCancel,d=Object(j.useState)(!1),x=Object(o.a)(d,2),h=x[0],p=x[1],g=l.a.useForm(),S=Object(o.a)(g,1)[0],v=null===t||void 0===t?void 0:t.isDetail;Object(j.useMemo)((function(){return{id:null===t||void 0===t?void 0:t.id}}),[t]);S.setFieldsValue(t);var k=e.ajax.useGet("/depart/queryListByPage").run,y=Object(j.useState)([]),z=Object(o.a)(y,2),C=z[0],w=z[1];Object(j.useEffect)((function(){Object(r.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k();case 2:t=e.sent,w((function(){return t.content||[]}));case 4:case"end":return e.stop()}}),e)})))()}),[k]);var I=e.ajax.usePost("/subjectManage/save",null,{setLoading:p,successTip:"\u521b\u5efa\u6210\u529f\uff01"}).run,q=e.ajax.usePost("/subjectManage/update",null,{setLoading:p,successTip:"\u4fee\u6539\u6210\u529f\uff01"}).run,N=Object(j.useCallback)(function(){var e=Object(r.a)(u.a.mark((function e(t){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=Object(s.a)({},t),!n){e.next=6;break}return e.next=4,q(c);case 4:e.next=8;break;case 6:return e.next=8,I(c);case 8:a();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,q,I,a]),T=v,E={labelCol:{flex:"140px"},disabled:T};return Object(O.jsx)(l.a,{form:S,name:"roleEdit",onFinish:N,initialValues:{},children:Object(O.jsxs)(b.k,{width:300,loading:h,okText:"\u4fdd\u5b58",okHtmlType:"submit",cancelText:"\u53d6\u6d88",onCancel:function(){return i()},footer:T?Object(O.jsx)(c.a,{onClick:i,children:"\u5173\u95ed"}):void 0,children:[n?Object(O.jsx)(b.e,{hidden:!0,name:"id"}):null,Object(O.jsxs)(m.a,{gutter:24,children:[Object(O.jsx)(f.a,{span:24,children:Object(O.jsx)(b.e,Object(s.a)(Object(s.a)({},E),{},{label:"\u4e13\u9898\u540d\u79f0",name:"zhuantimingcheng",required:!0,noSpace:!0}))}),Object(O.jsx)(f.a,{span:24,children:Object(O.jsx)(b.e,Object(s.a)(Object(s.a)({},E),{},{type:"select-tree",label:"\u4e13\u9898\u8d1f\u8d23\u90e8\u95e8",name:"zhuantifuzebumen",required:!0,noSpace:!0,fieldKey:"id",fieldNames:{label:"bumengmingcheng",value:"bumengmingcheng",children:"children"},treeData:C}))})," ",Object(O.jsxs)(f.a,{span:24,children:[Object(O.jsx)(b.e,Object(s.a)(Object(s.a)({},E),{},{label:"\u8d1f\u8d23\u4eba",required:!0,name:"fuzeren",noSpace:!0}))," "]}),Object(O.jsxs)(f.a,{span:24,children:[Object(O.jsx)(b.e,Object(s.a)(Object(s.a)({},E),{},{label:"\u8d1f\u8d23\u4eba\u8054\u7cfb\u65b9\u5f0f",required:!0,name:"fuzerenlianxifangshi",noSpace:!0}))," "]}),Object(O.jsx)(f.a,{span:24,children:Object(O.jsx)(b.e,Object(s.a)(Object(s.a)({},E),{},{type:"select-tree",label:"\u76f8\u5173\u90e8\u95e8",required:!0,name:"xiangguanbumen",noSpace:!0,fieldKey:"id",fieldNames:{label:"bumengmingcheng",value:"bumengmingcheng",children:"children"},treeData:C}))}),Object(O.jsxs)(f.a,{span:24,children:[Object(O.jsx)(b.e,Object(s.a)(Object(s.a)({type:"textarea"},E),{},{label:"\u653f\u7b56\u94fe\u63a5",required:!0,name:"zhengcelianjie",noSpace:!0}))," "]}),Object(O.jsxs)(f.a,{span:24,children:[Object(O.jsx)(b.e,Object(s.a)(Object(s.a)({type:"textarea"},E),{},{label:"\u653f\u7b56\u63cf\u8ff0",required:!0,name:"zhuantimiaoshu",noSpace:!0}))," "]})]})]})})}));t.default=Object(d.a)({path:"/subjectManage/mySubject"})((function(e){var t=Object(j.useState)(!1),n=Object(o.a)(t,2),i=n[0],d=n[1],m=Object(j.useState)(1),f=Object(o.a)(m,2),p=f[0],g=f[1],S=Object(j.useState)(20),v=Object(o.a)(S,2),k=v[0],y=v[1],z=Object(j.useState)({}),C=Object(o.a)(z,2),w=C[0],I=C[1],q=Object(j.useState)(!1),N=Object(o.a)(q,2),T=N[0],E=N[1],P=Object(j.useState)(null),D=Object(o.a)(P,2),L=D[0],M=D[1],F=l.a.useForm(),K=Object(o.a)(F,1)[0],R=Object(j.useMemo)((function(){return Object(s.a)(Object(s.a)({},w),{},{pageNum:p,pageSize:k})}),[w,p,k]),V=Object(j.useCallback)((function(){I(K.getFieldsValue())}),[K]),B=e.ajax.useGet("/subjectManage/queryListByPage",R,[R],{setLoading:d,formatResult:function(e){return{dataSource:(null===e||void 0===e?void 0:e.content)||[],total:(null===e||void 0===e?void 0:e.totalElements)||0}}}).data,G=(B=void 0===B?{}:B).dataSource,H=B.total,J=e.ajax.useDel("/subjectManage/:id",null,{setLoading:d,successTip:"\u5220\u9664\u6210\u529f\uff01"}).run,_=[{title:"\u4e13\u9898\u540d\u79f0",dataIndex:"zhuantimingcheng"},{title:"\u4e13\u9898\u8d1f\u8d23\u90e8\u95e8",dataIndex:"zhuantifuzebumen"},{title:"\u8d1f\u8d23\u4eba",dataIndex:"fuzeren"},{title:"\u76f8\u5173\u90e8\u95e8",dataIndex:"xiangguanbumen"},{title:"\u4e13\u9898\u6307\u6807\u6570(\u53bb\u91cd)",dataIndex:"zhuantizhibiaoshu"},{title:"\u64cd\u4f5c",key:"operator",width:200,render:function(e,t){var n=t.id,a=t.zhuantimingcheng,c=[{label:"\u67e5\u770b",onClick:function(){return M(Object(s.a)(Object(s.a)({},t),{},{isDetail:!0}))||E(!0)}},{label:"\u4fee\u6539",onClick:function(){return M(t)||E(!0)}},{label:"\u914d\u7f6e",onClick:function(){return ue(t)||ne(!0)}},{label:"\u5220\u9664",color:"red",confirm:{title:"\u60a8\u786e\u5b9a\u5220\u9664\u300c".concat(a,"\u300d\u5417\uff1f"),onConfirm:function(){return A(n)}}}];return Object(O.jsx)(b.l,{items:c})}}],A=Object(j.useCallback)(function(){var e=Object(r.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(t);case 2:V();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[J,V]),Q={style:{width:300}},U=Object(j.useState)([]),W=Object(o.a)(U,2),X=W[0],Y=W[1],Z=Object(j.useCallback)((function(e){Y(e)}),[]),$=Object(j.useState)(!1),ee=Object(o.a)($,2),te=ee[0],ne=ee[1],ae=Object(j.useState)(null),ce=Object(o.a)(ae,2),ie=ce[0],ue=ce[1];return Object(O.jsxs)(b.m,{loading:i,children:[Object(O.jsx)(b.o,{children:Object(O.jsxs)(l.a,{name:"user",layout:"inline",form:K,initialValues:{position:"01"},onFinish:function(e){return g(1)||I(e)},children:[Object(O.jsx)(b.e,Object(s.a)(Object(s.a)({},Q),{},{label:"\u4e13\u9898\u540d\u79f0",name:"zhuantimingcheng"})),Object(O.jsx)(b.e,Object(s.a)(Object(s.a)({},Q),{},{label:"\u4e13\u9898\u8d1f\u8d23\u90e8\u95e8",name:"zhuantifuzebumen"})),Object(O.jsx)(b.e,Object(s.a)(Object(s.a)({},Q),{},{label:"\u8d1f\u8d23\u4eba",name:"fuzeren"})),Object(O.jsx)(b.e,{children:Object(O.jsxs)(a.b,{children:[Object(O.jsx)(c.a,{type:"primary",htmlType:"submit",children:"\u67e5\u8be2"}),Object(O.jsx)(c.a,{onClick:function(){return K.resetFields()},children:"\u91cd\u7f6e"})]})})]})}),Object(O.jsxs)(b.q,{children:[Object(O.jsx)(c.a,{type:"primary",onClick:function(){return M(null)||E(!0)},children:"\u65b0\u589e\u4e13\u9898"}),Object(O.jsx)(c.a,{danger:!0,onClick:function(){return M(null)||E(!0)},children:"\u6279\u91cf\u5220\u9664"})]}),Object(O.jsx)(b.p,{serialNumber:!0,pageNum:p,pageSize:k,fitHeight:!0,dataSource:G,columns:_,rowSelection:{selectedRowKeys:X,onChange:Z},rowKey:"id"}),Object(O.jsx)(b.n,{total:H,pageNum:p,pageSize:k,onPageNumChange:g,onPageSizeChange:function(e){return g(1)||y(e)}}),Object(O.jsx)(h,{visible:T,record:L,isEdit:!!L,onOk:function(){E(!1),V()},onCancel:function(){return E(!1)}}),Object(O.jsx)(x,{visible:te,record:ie,isEdit:!!ie,onOk:function(){ne(!1),V()},onCancel:function(){return ne(!1)}})]})}))},996:function(e,t,n){"use strict";n(35),n(510)},997:function(e,t,n){"use strict";n(35),n(510)},998:function(e,t,n){"use strict";var a=n(484);t.a=a.a},999:function(e,t,n){"use strict";var a=n(288);t.a=a.a}}]);
//# sourceMappingURL=26.62567cfd.chunk.js.map