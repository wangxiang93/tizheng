(this["webpackJsonp_react-admin"]=this["webpackJsonp_react-admin"]||[]).push([[22],{1001:function(e,n,t){var a={"./index.js":995,"./system.js":1002};function r(e){var n=c(e);return t(n)}function c(e){if(!t.o(a,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=c,e.exports=r,r.id=1001},1002:function(e,n,t){"use strict";t.r(n);var a=t(5),r=t.n(a),c=t(11),i=(t(511),t(370)),s=t(151),o=t(9);n.default={menuTarget:[{value:"menu",label:"\u5e94\u7528\u83dc\u5355"},{value:"qiankun",label:"\u4e7e\u5764\u5b50\u5e94\u7528"},{value:"iframe",label:"iframe\u5185\u5d4c\u7b2c\u4e09\u65b9"},{value:"_self",label:"\u5f53\u524d\u7a97\u53e3\u6253\u5f00\u7b2c\u4e09\u65b9"},{value:"_blank",label:"\u65b0\u5f00\u7a97\u53e3\u6253\u5f00\u7b2c\u4e09\u65b9"}],yesNo:[{value:!0,label:"\u662f",tag:Object(o.jsx)(i.a,{color:"green",children:"\u662f"})},{value:!1,label:"\u5426",tag:Object(o.jsx)(i.a,{color:"red",children:"\u5426"})}],enabled:[{value:!0,label:"\u542f\u7528",tag:Object(o.jsx)(i.a,{color:"green",children:"\u542f\u7528"})},{value:!1,label:"\u7981\u7528",tag:Object(o.jsx)(i.a,{color:"red",children:"\u7981\u7528"})}],sex:[{value:"1",label:"\u7537"},{value:"2",label:"\u5973"},{value:"3",label:"\u672a\u77e5"}],system:function(){return Object(c.a)(r.a.mark((function e(){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.b.get("/menu/queryTopMenus");case 2:return n=e.sent,e.abrupt("return",n.map((function(e){return{value:e.id,label:e.title,meta:e}})));case 4:case"end":return e.stop()}}),e)})))()},action:function(){return[{value:"add",label:"\u6dfb\u52a0"}]},get demo(){return[]}}},1012:function(e,n,t){var a=t(197),r=t(1021);"string"===typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var c={insert:"head",singleton:!1};a(r,c);e.exports=r.locals||{}},1021:function(e,n,t){"use strict";t.r(n);var a=t(117),r=t.n(a)()(!0);r.push([e.i,".menuRoot_113Rj {\n  display: flex;\n}\n.menu_15fDF {\n  flex: 0 0 210px;\n  width: 210px;\n  display: flex;\n  flex-direction: column;\n  border-right: 1px solid #d9d9d9;\n}\n.menu_15fDF .menuTop_3pH2W {\n  padding: 8px;\n  margin-right: 8px;\n  display: flex;\n  align-items: center;\n  border-bottom: 1px solid #d9d9d9;\n}\n.menu_15fDF .menuContent_2V06a {\n  flex: 1;\n  overflow: auto;\n}\n.menu_15fDF .react-admin-menu-submenu {\n  position: relative;\n}\n.menu_15fDF .react-admin-menu-submenu:after {\n  position: absolute;\n  top: 0;\n  right: 0;\n  height: 44px;\n  border-right: 3px solid #1890ff;\n  transform: scaleY(0.0001);\n  opacity: 0;\n  transition: transform 0.15s cubic-bezier(0.215, 0.61, 0.355, 1), opacity 0.15s cubic-bezier(0.215, 0.61, 0.355, 1);\n  content: '';\n}\n.menu_15fDF .react-admin-menu-submenu.react-admin-menu-item-selected:after {\n  opacity: 1;\n  transform: scaleY(1);\n}\n.pane_FR57c {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  border-right: 1px solid #d9d9d9;\n}\n.title_109pZ {\n  flex: 0 0 40px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding-top: 8px;\n}\n.content_3W3ih {\n  flex: 1;\n  overflow: auto;\n  padding: 8px 32px;\n}\n.footerAction_1xl28 {\n  flex: 0 0 50px;\n  justify-content: flex-end;\n  border-top: 1px solid #d9d9d9;\n  padding: 0 10px;\n  margin: 0 8px;\n}\n","",{version:3,sources:["webpack://src/pages/system/menus/style.less"],names:[],mappings:"AAEA;EACI,aAAA;AAIJ;AADA;EACI,eAAA;EACA,YAAA;EACA,aAAA;EACA,sBAAA;EACA,+BAAA;AAGJ;AARA;EAQQ,YAAA;EACA,iBAAA;EACA,aAAA;EACA,mBAAA;EACA,gCAAA;AAGR;AAfA;EAgBQ,OAAA;EACA,cAAA;AAER;AAnBA;EAsBY,kBAAA;AAAZ;AAEY;EACI,kBAAA;EACA,MAAA;EACA,QAAA;EACA,YAAA;EACA,+BAAA;EACA,yBAAA;EACA,UAAA;EACA,kHAAA;EACA,WAAA;AAAhB;AAjCA;EAsCY,UAAA;EACA,oBAAA;AAFZ;AAOA;EACI,OAAA;EACA,aAAA;EACA,sBAAA;EACA,+BAAA;AALJ;AAQA;EACI,cAAA;EACA,aAAA;EACA,uBAAA;EACA,mBAAA;EACA,gBAAA;AANJ;AASA;EACI,OAAA;EACA,cAAA;EACA,iBAAA;AAPJ;AAUA;EACI,cAAA;EACA,yBAAA;EACA,6BAAA;EACA,eAAA;EACA,aAAA;AARJ",sourcesContent:["@import \"src/theme\";\n\n.menuRoot {\n    display: flex;\n}\n\n.menu {\n    flex: 0 0 210px;\n    width: 210px;\n    display: flex;\n    flex-direction: column;\n    border-right: 1px solid @border-color-base;\n\n    .menuTop {\n        padding: 8px;\n        margin-right: 8px;\n        display: flex;\n        align-items: center;\n        border-bottom: 1px solid @border-color-base;\n    }\n\n    .menuContent {\n        flex: 1;\n        overflow: auto;\n    }\n\n    :global {\n        .@{ant-prefix}-menu-submenu {\n            position: relative;\n\n            &:after {\n                position: absolute;\n                top: 0;\n                right: 0;\n                height: 44px;\n                border-right: 3px solid @primary-color;\n                transform: scaleY(0.0001);\n                opacity: 0;\n                transition: transform 0.15s cubic-bezier(0.215, 0.61, 0.355, 1), opacity 0.15s cubic-bezier(0.215, 0.61, 0.355, 1);\n                content: '';\n            }\n        }\n\n        .@{ant-prefix}-menu-submenu.@{ant-prefix}-menu-item-selected:after {\n            opacity: 1;\n            transform: scaleY(1);\n        }\n    }\n}\n\n.pane {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    border-right: 1px solid @border-color-base;\n}\n\n.title {\n    flex: 0 0 40px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding-top: 8px;\n}\n\n.content {\n    flex: 1;\n    overflow: auto;\n    padding: 8px 32px;\n}\n\n.footerAction {\n    flex: 0 0 50px;\n    justify-content: flex-end;\n    border-top: 1px solid @border-color-base;\n    padding: 0 10px;\n    margin: 0 8px;\n}\n\n\n@packageName: react-admin;"],sourceRoot:""}]),r.locals={antPrefix:"react-admin",raLibPrefix:"react-admin-ra",primaryColor:"#1890ff",menuRoot:"menuRoot_113Rj",menu:"menu_15fDF",menuTop:"menuTop_3pH2W",menuContent:"menuContent_2V06a",pane:"pane_FR57c",title:"title_109pZ",content:"content_3W3ih",footerAction:"footerAction_1xl28"},n.default=r},972:function(e,n,t){"use strict";t.r(n);t(172);var a=t(116),r=(t(310),t(171)),c=(t(107),t(39)),i=(t(152),t(30)),s=t(5),o=t.n(s),l=t(11),u=t(26),d=t(49),A=t(1),b=t.n(A),p=t(0),j=t(15),m=t(170),f=t(20),x=(t(373),t(218)),O=(t(174),t(83)),h=(t(369),t(232)),v=(t(512),t(311)),g=t(1013),y=t.n(g),C=t(995),k=t(1012),E=t.n(k),w=t(9),_=C.default.menuTarget,I=v.a.TabPane,B=Object(m.a)()((function(e){var n=e.isAdd,t=e.selectedMenu,a=e.onSubmit,i=e.onValuesChange,s=h.a.useForm(),A=Object(d.a)(s,1)[0],m=Object(p.useState)(!1),g=Object(d.a)(m,2),C=g[0],k=g[1],B=Object(p.useState)("1"),F=Object(d.a)(B,2),q=F[0],N=F[1],R=Object(j.W)(null,285),M=Object(d.a)(R,1)[0],S=Object(p.useRef)(null),P=t&&Object.keys(t).length,T=n&&!P,V=n&&P,D=T?f.o?"\u6dfb\u52a0\u5e94\u7528":"\u6dfb\u52a0\u9876\u7ea7":V?"\u6dfb\u52a0\u83dc\u5355":"\u4fee\u6539\u83dc\u5355",L=e.ajax.useDel("/menu/:id",null,{setLoading:k}).run,Y=e.ajax.usePost("/menu/addMenu",null,{setLoading:k}).run,J=e.ajax.usePost("/menu/addSubMenus",null,{setLoading:k}).run,U=e.ajax.usePost("/menu/updateMenuById",null,{setLoading:k}).run,z=e.ajax.useGet("/menu/getOneMenu").run,W=e.ajax.usePost("/role/addRole",null,{setLoading:k}).run;Object(p.useEffect)((function(){A.resetFields();var e=Object(u.a)(Object(u.a)({},t),{},{order:null===t||void 0===t?void 0:t.ord});T&&(e={target:"qiankun"}),V&&(e={target:"menu",parentId:t.id,systemId:t.systemId}),A.setFieldsValue(e)}),[A,n,T,V,t]);var Z=Object(p.useCallback)(function(){var e=Object(l.a)(o.a.mark((function e(t){var r,c,i,s,l,d,A,b;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!C){e.next=2;break}return e.abrupt("return");case 2:if(r=Object(u.a)(Object(u.a)({},t),{},{type:1,sort:t.order,ord:t.order}),!n){e.next=31;break}if(!V||"2"!==q){e.next=21;break}c=t.menus,i=t.parentId,e.prev=6,c=y.a.parse(c),e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(6),e.abrupt("return",O.a.error({title:"\u6e29\u99a8\u63d0\u793a",content:"\u6279\u91cf\u6dfb\u52a0\u7684\u83dc\u5355\u6570\u636e\u6709\u8bef\uff0c\u8bf7\u4fee\u6b63\u540e\u4fdd\u5b58\uff01"}));case 13:return s={menus:c,parentId:i},e.next=16,J(s);case 16:l=e.sent,d=l.id,a&&a({id:d,isAdd:!0}),e.next=29;break;case 21:return e.next=23,Y(r);case 23:if(A=e.sent,b=A.id,a&&a(Object(u.a)(Object(u.a)({},r),{},{id:b,isAdd:!0})),!f.o||!T){e.next=29;break}return e.next=29,W({systemId:b,name:"\u7cfb\u7edf\u7ba1\u7406\u5458",enabled:!0,remark:"\u62e5\u6709\u5f53\u524d\u5b50\u7cfb\u7edf\u6240\u6709\u6743\u9650",type:2});case 29:e.next=34;break;case 31:return e.next=33,U(r);case 33:a&&a(Object(u.a)(Object(u.a)({},r),{},{isUpdate:!0}));case 34:case"end":return e.stop()}}),e,null,[[6,10]])})));return function(n){return e.apply(this,arguments)}}(),[q,J,n,V,T,C,a,Y,W,U]),H=Object(j.V)(function(){var e=Object(l.a)(o.a.mark((function e(t,a){var r,c,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,z({name:a});case 4:if(r=e.sent){e.next=7;break}return e.abrupt("return");case 7:if(c=A.getFieldValue("id"),i="".concat(r.id),!n||r.name!==a){e.next=11;break}throw Error("\u6ce8\u518c\u540d\u79f0\u4e0d\u80fd\u91cd\u590d\uff01");case 11:if(n||i===c||r.name!==a){e.next=13;break}throw Error("\u6ce8\u518c\u540d\u79f0\u4e0d\u80fd\u91cd\u590d\uff01");case 13:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),Q=Object(p.useCallback)(Object(l.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null===t||void 0===t?void 0:t.id,e.next=3,L({id:n});case 3:a&&a({id:n,isDelete:!0});case 4:case"end":return e.stop()}}),e)}))),[L,a,null===t||void 0===t?void 0:t.id]),G={labelCol:{flex:"100px"}};return Object(w.jsxs)(h.a,{name:"menu-form",form:A,onFinish:Z,onValuesChange:i,initialValues:{enabled:!0},className:b()(E.a.pane),children:[Object(w.jsx)("h3",{className:b()(E.a.title),children:D}),Object(w.jsxs)(j.c,{ref:S,loading:C,className:b()(E.a.content),children:[V?Object(w.jsxs)(v.a,{activeKey:q,onChange:function(e){return N(e)},children:[Object(w.jsx)(I,{tab:"\u5355\u4e2a\u6dfb\u52a0"},"1"),Object(w.jsx)(I,{tab:"\u6279\u91cf\u6dfb\u52a0"},"2")]}):null,Object(w.jsx)(j.e,{name:"id",hidden:!0}),Object(w.jsx)(j.e,{name:"parentId",hidden:!0}),"1"===q?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(j.e,Object(u.a)(Object(u.a)({},G),{},{label:"\u7c7b\u578b",type:"select",name:"target",options:_,tooltip:"\u6307\u5b9a\u7c7b\u578b\u4e4b\u540e\uff0c\u5c06\u4ee5\u4e7e\u5764\u5b50\u9879\u76ee\u6216\u7b2c\u4e09\u65b9\u7f51\u7ad9\u65b9\u5f0f\u6253\u5f00",required:!0,getPopupContainer:function(){return S.current}})),Object(w.jsx)(j.e,Object(u.a)(Object(u.a)({},G),{},{label:"\u6807\u9898",name:"title",required:!0,tooltip:"\u83dc\u5355\u6807\u9898"})),Object(w.jsx)(j.e,Object(u.a)(Object(u.a)({},G),{},{type:"number",label:"\u6392\u5e8f",name:"order",tooltip:"\u964d\u5e8f\uff0c\u8d8a\u5927\u8d8a\u9760\u524d"})),Object(w.jsx)(j.e,Object(u.a)(Object(u.a)({},G),{},{label:"\u8def\u5f84",name:"path",tooltip:"\u83dc\u5355\u8def\u5f84\u6216\u7b2c\u4e09\u65b9\u7f51\u7ad9\u5730\u5740"})),Object(w.jsx)(j.e,Object(u.a)(Object(u.a)({},G),{},{type:"switch",label:"\u542f\u7528",name:"enabled",checkedChildren:"\u542f",unCheckedChildren:"\u7981",tooltip:"\u662f\u5426\u542f\u7528"})),Object(w.jsx)(j.e,{shouldUpdate:!0,noStyle:!0,children:function(e){return"qiankun"===(0,e.getFieldValue)("target")?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(j.e,Object(u.a)(Object(u.a)({},G),{},{label:"\u6ce8\u518c\u540d\u79f0",tooltip:"\u8981\u4e0e\u5b50\u5e94\u7528package.json\u4e2d\u58f0\u660e\u7684name\u5c5e\u6027\u76f8\u540c\uff0c\u552f\u4e00\u4e0d\u53ef\u91cd\u590d",name:"name",rules:[{validator:H},{pattern:/^[0-9A-Za-z_-]+$/,message:"\u53ea\u5141\u8bb8\u82f1\u6587\u5927\u5c0f\u5199\u3001_\u3001-\uff01"}],required:!0})),Object(w.jsx)(j.e,Object(u.a)(Object(u.a)({},G),{},{label:"\u5165\u53e3\u5730\u5740",tooltip:"http(s)\u5f00\u5934\u7684\u7f51\u5740",name:"entry",rules:[{validator:function(e,n){return n&&!n.startsWith("http")?Promise.reject("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u5165\u53e3\u5730\u5740\uff01"):Promise.resolve()}}],noSpace:!0,required:!0}))]}):Object(w.jsx)(j.e,Object(u.a)(Object(u.a)({},G),{},{label:"\u57fa\u7840\u8def\u5f84",name:"basePath",tooltip:"\u6240\u6709\u5176\u5b50\u83dc\u5355\u8def\u5f84\u5c06\u4ee5\u6b64\u4e3a\u524d\u7f00"}))}})]}):Object(w.jsx)(j.e,{labelCol:{flex:0},type:"textarea",name:"menus",rows:16,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u83dc\u5355\u6570\u636e\uff01"}],style:{height:M},placeholder:"\u6279\u91cf\u6dfb\u52a0\u5b50\u83dc\u5355\uff0c\u7ed3\u6784\u5982\u4e0b\uff1a\n[\n    {id: 'system', title: '\u7cfb\u7edf\u7ba1\u7406', order: 900},\n    {id: 'user', parentId: 'system', title: '\u7528\u6237\u7ba1\u7406', path: '/users', order: 900},\n    {id: 'menus', parentId: 'system', title: '\u83dc\u5355\u7ba1\u7406', path: '/menus', order: 900},\n    {id: 'role', parentId: 'system', title: '\u89d2\u8272\u7ba1\u7406', path: '/roles', order: 900},\n    {\n        id: 'demo', parentId: 'system', title: '\u6d4b\u8bd5\u5b50\u5e94\u7528',\n        target: 'qiankun',\n\n        name: 'react-admin',\n        entry: 'http://localhost:3000',\n\n        order: 850,\n    },\n]\n                            "})]}),Object(w.jsxs)(r.b,{className:b()(E.a.footerAction),children:[n?null:Object(w.jsx)(x.a,{title:"\u60a8\u786e\u5b9a\u5220\u9664\u300c".concat(null===t||void 0===t?void 0:t.title,"\u300d\uff1f"),onConfirm:Q,children:Object(w.jsx)(c.a,{loading:C,danger:!0,children:"\u5220\u9664"})}),Object(w.jsx)(c.a,{loading:C,type:"primary",htmlType:"submit",children:"\u4fdd\u5b58"})]})]})})),F=t(989),q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},N=t(24),R=function(e,n){return p.createElement(N.a,Object.assign({},e,{ref:n,icon:q}))};R.displayName="PlusOutlined";var M=p.forwardRef(R),S=Object(m.a)()((function(e){var n=h.a.useForm(),t=Object(d.a)(n,1)[0],i=e.isAdd,s=e.selectedMenu,u=e.onSubmit,A=e.onValuesChange,m=Object(p.useState)(!1),f=Object(d.a)(m,2),x=f[0],O=f[1],v=e.ajax.usePost("/menu/updateSubActions",null,{setLoading:O,successTip:"\u529f\u80fd\u4fdd\u5b58\u6210\u529f\uff01"}).run,g=Object(p.useCallback)(function(){var e=Object(l.a)(o.a.mark((function e(n){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.actions,a=null===s||void 0===s?void 0:s.id,e.next=4,v({actions:t,parentId:a});case 4:u&&u(t);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[u,s,v]);return Object(p.useEffect)((function(){t.resetFields(),s&&t.setFieldsValue({actions:null===s||void 0===s?void 0:s.actions})}),[s,t]),Object(w.jsxs)(h.a,{name:"action-form",form:t,onFinish:g,onValuesChange:A,className:b()(E.a.pane),children:[Object(w.jsx)("h3",{className:b()(E.a.title),children:"\u529f\u80fd\u5217\u8868"}),Object(w.jsx)(j.c,{loading:x,className:b()(E.a.content),children:i?Object(w.jsx)(a.a,{style:{marginTop:50},description:"\u8bf7\u9009\u62e9\u6216\u4fdd\u5b58\u65b0\u589e\u83dc\u5355"}):Object(w.jsx)(h.a.List,{name:"actions",children:function(e,n){var t=n.add,a=n.remove;return Object(w.jsxs)(w.Fragment,{children:[e.map((function(e){var n=e.key,t=e.name;return Object(w.jsxs)(r.b,{style:{display:"flex",marginBottom:8},align:"baseline",children:[Object(w.jsx)(j.e,{hidden:!0,name:[t,"id"]}),Object(w.jsx)(j.e,{type:"switch",name:[t,"enabled"],initialValue:!0,checkedChildren:"\u542f",unCheckedChildren:"\u7981"}),Object(w.jsx)(j.e,{name:[t,"title"],placeholder:"\u540d\u79f0",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u540d\u79f0\uff01"}]}),Object(w.jsx)(j.e,{name:[t,"code"],placeholder:"\u7f16\u7801",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7f16\u7801\uff01"}]}),Object(w.jsx)(F.a,{style:{color:"red"},onClick:function(){return a(t)}})]},n)})),Object(w.jsx)(j.e,{children:Object(w.jsx)(c.a,{type:"dashed",onClick:function(){return t()},block:!0,icon:Object(w.jsx)(M,{}),children:"\u65b0\u589e\u7f16\u7801"})})]})}})}),Object(w.jsx)(r.b,{className:b()(E.a.footerAction),children:Object(w.jsx)(c.a,{loading:x,disabled:i,type:"primary",htmlType:"submit",children:"\u4fdd\u5b58"})})]})})),P=t(148),T=t.n(P);n.default=Object(m.a)({path:"/system/menus"})((function(e){var n=Object(p.useState)(!0),t=Object(d.a)(n,2),s=t[0],A=t[1],m=Object(p.useState)(null),x=Object(d.a)(m,2),O=x[0],h=x[1],v=Object(p.useState)(!1),g=Object(d.a)(v,2),y=g[0],C=g[1],k=Object(p.useState)(!1),_=Object(d.a)(k,2),I=_[0],F=_[1],q=e.ajax.useGet("/menu/queryMenus",null,{formatResult:function(e){return(e||[]).map((function(e,n,t){var a,r,c=t.filter((function(n){return 2===n.type&&n.parentId===e.id}));return Object(u.a)(Object(u.a)({},e),{},{id:""+e.id,parentId:e.parentId?""+e.parentId:e.parentId,order:null!==(a=null!==(r=e.order)&&void 0!==r?r:e.sort)&&void 0!==a?a:e.ord,actions:c})})).filter((function(e){return 1===e.type}))}}),N=q.loading,R=q.data,M=void 0===R?[]:R,P=q.run,V=Object(p.useCallback)(Object(l.a)(o.a.mark((function e(){var n,t=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=!(t.length>0&&void 0!==t[0])||t[0])||!y){e.next=4;break}return e.next=4,Object(j.r)("\u83dc\u5355\u6709\u672a\u4fdd\u5b58\u6570\u636e\uff0c\u662f\u5426\u653e\u5f03\uff1f");case 4:if(C(!1),!n||!I){e.next=8;break}return e.next=8,Object(j.r)("\u529f\u80fd\u5217\u8868\u6709\u672a\u4fdd\u5b58\u6570\u636e\uff0c\u662f\u5426\u653e\u5f03\uff1f");case 8:F(!1);case 9:case"end":return e.stop()}}),e)}))),[y,I]),D=Object(p.useCallback)(function(){var e=Object(l.a)(o.a.mark((function e(n){var t,a,r,c=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.key,a=!(c.length>1&&void 0!==c[1])||c[1],e.next=4,V(a);case 4:r=M.find((function(e){return e.id===t})),h(r),A(!1);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[V,M]),L=Object(p.useMemo)((function(){var e=Object(j.s)(Object(j.T)(M,(function(e,n){return n.order-e.order})));return[function e(n){return n.map((function(n){var t=n.id,a=n.icon,r=n.title,c=n.children;return c&&c.length?Object(w.jsx)(i.a.SubMenu,{title:Object(w.jsx)("span",{onClick:function(){var e=Object(l.a)(o.a.mark((function e(n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.stopPropagation(),e.next=3,D({key:t});case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),children:r}),icon:a,"data-menu":n,className:b()((null===O||void 0===O?void 0:O.id)===t?"".concat(T.a.antPrefix,"-menu-item-selected"):""),children:e(c)},t):Object(w.jsx)(i.a.Item,{icon:a,"data-menu":n,children:r},t)}))}(e),e]}),[M,O,y]),Y=Object(d.a)(L,2),J=Y[0],U=Y[1];Object(p.useEffect)((function(){Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:case"end":return e.stop()}}),e)})))()}),[P]);var z=Object(p.useCallback)(function(){var e=Object(l.a)(o.a.mark((function e(n){var t,a,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!1),t=n.isAdd,a=n.isDelete,n.isUpdate,r=n.id,e.next=4,P();case 4:if(t&&h(Object(u.a)({},O)),!a){e.next=15;break}if(!(c=Object(j.A)(U,r))){e.next=13;break}return e.next=11,D({key:c.id},!1);case 11:e.next=15;break;case 13:h({}),A(!0);case 15:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[P,D,U,O]),W=Object(p.useCallback)(Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F(!1),e.next=3,P();case 3:case"end":return e.stop()}}),e)}))),[P]);return Object(w.jsxs)(j.m,{loading:N,fitHeight:!0,className:b()(E.a.menuRoot),children:[Object(w.jsxs)("div",{className:b()(E.a.menu),children:[Object(w.jsxs)(r.b,{className:b()(E.a.menuTop),children:[Object(w.jsx)(c.a,{type:"primary",onClick:Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:A(!0),h(null);case 4:case"end":return e.stop()}}),e)}))),children:f.o?"\u6dfb\u52a0\u5e94\u7528":"\u6dfb\u52a0\u9876\u7ea7"}),Object(w.jsx)(c.a,{disabled:!O,type:"primary",onClick:Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:A(!0);case 3:case"end":return e.stop()}}),e)}))),children:"\u6dfb\u52a0\u5b50\u7ea7"})]}),Object(w.jsx)("div",{className:b()(E.a.menuContent),children:null!==M&&void 0!==M&&M.length?Object(w.jsx)(i.a,{mode:"inline",selectable:!0,selectedKeys:[null===O||void 0===O?void 0:O.id],onClick:function(e){return D(e)},children:J}):Object(w.jsx)(a.a,{style:{marginTop:58},description:"\u6682\u65e0\u6570\u636e"})})]}),Object(w.jsx)(B,{isAdd:s,selectedMenu:O,onSubmit:z,onValuesChange:function(){return C(!0)}}),Object(w.jsx)(S,{isAdd:s,selectedMenu:O,onValuesChange:function(){return F(!0)},onSubmit:W})]})}))},995:function(e,n,t){"use strict";t.r(n);var a=t(49),r=t(15),c={},i=t(1001);i.keys().forEach((function(e){if(!["./index.js"].includes(e)){var n=i(e).default;Object.entries(n).forEach((function(n){var t=Object(a.a)(n,2),r=t[0],i=t[1];if(r in c)throw Error("".concat(e," \u6587\u4ef6\u4e2d key \u300c").concat(r,"\u300d\u5df2\u88ab\u4f7f\u7528\uff01\u8bf7\u66f4\u6362\uff01"));c[r]=i}))}})),Object(r.Z)(c,5e3),n.default=c}}]);
//# sourceMappingURL=22.4b96d8ce.chunk.js.map