{"version":3,"sources":["pages/indexManage/myIndex/EditModal.jsx","pages/indexManage/myIndex/index.jsx","../node_modules/antd/es/row/style/index.js","../node_modules/antd/es/col/style/index.js","../node_modules/antd/es/row/index.js","../node_modules/antd/es/col/index.js"],"names":["config","modal","title","props","record","isDetail","isEdit","width","top","onOk","onCancel","useState","loading","setLoading","useForm","form","useMemo","id","isShiShi","setIsShiShi","R","region","split","setFieldsValue","getDepartList","ajax","useGet","run","departOptions","setDepartOptions","useEffect","a","res","content","handlerTimeOptions","tongjifangshi","tongjifangshiChange","target","value","save","usePost","successTip","update","handleSubmit","useCallback","values","params","console","log","q","status","join","disabled","layout","labelCol","flex","dayOptions","setDayOptions","monthOptions","setMonthOptions","arr","arr2","i","push","label","name","onFinish","okText","okHtmlType","cancelText","footer","onClick","undefined","hidden","gutter","span","required","noSpace","type","fieldKey","fieldNames","children","treeData","onChange","options","mode","path","pageNum","setPageNum","pageSize","setPageSize","conditions","setConditions","visible","setVisible","setRecord","refreshSearch","getFieldsValue","formatResult","dataSource","total","totalElements","data","deleteRecord","useDel","columns","dataIndex","key","render","items","history","pathname","state","abc","color","confirm","onConfirm","handleDelete","queryItem","style","selectedRowKeys","setSelectedRowKeys","handleSelectedRowKeysChange","initialValues","position","htmlType","resetFields","danger","fitHeight","rowSelection","rowKey","onPageNumChange","onPageSizeChange","EditModal","Row","Col"],"mappings":"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","file":"static/js/24.577862fc.chunk.js","sourcesContent":["import {useCallback, useMemo, useState, useEffect} from 'react';\r\nimport {Form, Row, Col, Card, Button} from 'antd';\r\nimport {ModalContent, FormItem, Content, validateRules, useDebounceValidator} from '@ra-lib/admin';\r\nimport config from 'src/commons/config-hoc';\r\n\r\nexport default config({\r\n    modal: {\r\n        title: (props) => {\r\n            if (props?.record?.isDetail) return '查看指标';\r\n            return props.isEdit ? '编辑指标' : '新增指标';\r\n        },\r\n        width: '75%',\r\n        top: 100,\r\n    },\r\n})(function Edit(props) {\r\n    const {record, isEdit, onOk, onCancel} = props;\r\n    const [loading, setLoading] = useState(false);\r\n    const [form] = Form.useForm();\r\n    const isDetail = record?.isDetail;\r\n\r\n    const params = useMemo(() => {\r\n        return {id: record?.id};\r\n    }, [record]);\r\n    const [isShiShi, setIsShiShi] = useState(false);\r\n    let R = {...record, region: record?.region.split(',') || record?.region};\r\n\r\n    // 编辑时，回显详情数据\r\n    form.setFieldsValue(R);\r\n    // 获取部门下拉\r\n    let {run: getDepartList} = props.ajax.useGet('/depart/queryListByPage');\r\n    const [departOptions, setDepartOptions] = useState([]);\r\n    useEffect(() => {\r\n        (async () => {\r\n            let res = await getDepartList();\r\n            setDepartOptions(() => res.content || []);\r\n            handlerTimeOptions();\r\n            if (R.tongjifangshi) {\r\n                tongjifangshiChange({target: {value: R.tongjifangshi}});\r\n            }\r\n        })();\r\n    }, [getDepartList]);\r\n    const {run: save} = props.ajax.usePost('/indexTable/save', null, {setLoading, successTip: '创建成功！'});\r\n    const {run: update} = props.ajax.usePost('/indexTable/update', null, {setLoading, successTip: '修改成功！'});\r\n\r\n    const handleSubmit = useCallback(\r\n        async (values) => {\r\n            const params = {\r\n                ...values,\r\n            };\r\n            if (isEdit) {\r\n                console.log(params, 'params');\r\n                await update(params);\r\n            } else {\r\n                let q = {...params, status: '待配置', region: params.region.join()};\r\n                console.log(q, 'q');\r\n                await save(q);\r\n            }\r\n\r\n            onOk();\r\n        },\r\n        [isEdit, update, save, onOk],\r\n    );\r\n\r\n    const disabled = isDetail;\r\n    const layout = {\r\n        labelCol: {flex: '140px'},\r\n        disabled,\r\n    };\r\n    const colLayout = {\r\n        xs: {span: 12},\r\n        sm: {span: 12},\r\n    };\r\n\r\n    function tongjifangshiChange({target}) {\r\n        if (target.value === '实时') {\r\n            setIsShiShi(false);\r\n        } else {\r\n            setIsShiShi(true);\r\n        }\r\n    }\r\n    const [dayOptions, setDayOptions] = useState([]);\r\n    const [monthOptions, setMonthOptions] = useState([]);\r\n    function handlerTimeOptions(params) {\r\n        let arr = [];\r\n        let arr2 = [];\r\n        for (let i = 1; i < 29; i++) {\r\n            if (i < 13) {\r\n                arr2.push({label: '第' + i + '月', value: '第' + i + '月'});\r\n            }\r\n            arr.push({label: '第' + i + '日', value: '第' + i + '日'});\r\n        }\r\n        setDayOptions(arr);\r\n        setMonthOptions(arr2);\r\n    }\r\n    return (\r\n        <Form form={form} name=\"roleEdit\" onFinish={handleSubmit}>\r\n            <ModalContent\r\n                width={300}\r\n                loading={loading}\r\n                okText=\"保存\"\r\n                okHtmlType=\"submit\"\r\n                cancelText=\"取消\"\r\n                onCancel={() => onCancel()}\r\n                footer={disabled ? <Button onClick={onCancel}>关闭</Button> : undefined}\r\n            >\r\n                {isEdit ? <FormItem hidden name=\"id\" /> : null}\r\n                <Row gutter={24}>\r\n                    <Col span={11}>\r\n                        <FormItem {...layout} label=\"指标名称\" name=\"name\" required noSpace />\r\n                    </Col>\r\n                    <Col span={11}>\r\n                        <FormItem\r\n                            {...layout}\r\n                            type=\"select-tree\"\r\n                            label=\"指标来源部门\"\r\n                            name=\"sourceDepart\"\r\n                            required\r\n                            noSpace\r\n                            fieldKey=\"id\"\r\n                            fieldNames={{label: 'bumengmingcheng', value: 'bumengmingcheng', children: 'children'}}\r\n                            treeData={departOptions}\r\n                        />\r\n                    </Col>{' '}\r\n                    <Col span={11}>\r\n                        <FormItem {...layout} label=\"指标来源科室\" name=\"sourceKeshi\" required noSpace />\r\n                    </Col>{' '}\r\n                    <Col span={11}>\r\n                        <FormItem\r\n                            {...layout}\r\n                            type=\"select-tree\"\r\n                            label=\"指标负责部门\"\r\n                            name=\"fuzeDepart\"\r\n                            required\r\n                            noSpace\r\n                            fieldKey=\"id\"\r\n                            fieldNames={{label: 'bumengmingcheng', value: 'bumengmingcheng', children: 'children'}}\r\n                            treeData={departOptions}\r\n                        />\r\n                    </Col>{' '}\r\n                    <Col span={11}>\r\n                        <FormItem {...layout} label=\"指标负责人\" required name=\"fuzeren\" noSpace />{' '}\r\n                    </Col>\r\n                    <Col span={11}>\r\n                        <FormItem {...layout} label=\"负责人联系方式\" required name=\"phone\" noSpace />{' '}\r\n                    </Col>\r\n                    <Col span={11}>\r\n                        <FormItem\r\n                            type=\"radio-group\"\r\n                            {...layout}\r\n                            label=\"统计方式\"\r\n                            required\r\n                            name=\"tongjifangshi\"\r\n                            onChange={tongjifangshiChange}\r\n                            options={[\r\n                                {label: '实时', value: '实时'},\r\n                                {label: '周期', value: '周期'},\r\n                            ]}\r\n                        />{' '}\r\n                    </Col>\r\n                    {isShiShi ? (\r\n                        <>\r\n                            <Col span={11}>\r\n                                <FormItem\r\n                                    type=\"radio-group\"\r\n                                    {...layout}\r\n                                    label=\"统计周期\"\r\n                                    required\r\n                                    name=\"tongjizhouqi\"\r\n                                    options={[\r\n                                        {label: '年度', value: '年度'},\r\n                                        {label: '半年度', value: '半年度'},\r\n                                        {label: '季度', value: '季度'},\r\n                                        {label: '月度', value: '月度'},\r\n                                        {label: '周', value: '周'},\r\n                                        {label: '日', value: '日'},\r\n                                    ]}\r\n                                />\r\n                            </Col>\r\n                            <Col span={11}>\r\n                                <FormItem\r\n                                    type=\"select\"\r\n                                    {...layout}\r\n                                    label=\"每年度第几个月\"\r\n                                    required\r\n                                    name=\"month\"\r\n                                    options={monthOptions}\r\n                                />\r\n                            </Col>\r\n                            <Col span={11}>\r\n                                <FormItem\r\n                                    type=\"select\"\r\n                                    {...layout}\r\n                                    label=\"第几日\"\r\n                                    required\r\n                                    name=\"day\"\r\n                                    options={dayOptions}\r\n                                />{' '}\r\n                            </Col>\r\n                        </>\r\n                    ) : null}\r\n                    <Col span={11}>\r\n                        <FormItem\r\n                            type=\"radio-group\"\r\n                            {...layout}\r\n                            label=\"是否共享\"\r\n                            required\r\n                            name=\"isShore\"\r\n                            options={[\r\n                                {label: '是', value: '是'},\r\n                                {label: '否', value: '否'},\r\n                            ]}\r\n                        />{' '}\r\n                    </Col>\r\n                    <Col span={11}>\r\n                        <FormItem {...layout} label=\"数据对接接口\" name=\"shujuduijiejiekou\" noSpace />\r\n                    </Col>\r\n                    <Col span={11}>\r\n                        <FormItem\r\n                            type=\"select\"\r\n                            {...layout}\r\n                            label=\"指标值单位\"\r\n                            required\r\n                            name=\"zhibiaozhidanwei\"\r\n                            options={[\r\n                                {label: '个', value: '个'},\r\n                                {label: '十', value: '十'},\r\n                                {label: '百', value: '百'},\r\n                                {label: '千', value: '千'},\r\n                                {label: '万', value: '万'},\r\n                            ]}\r\n                        />{' '}\r\n                    </Col>\r\n                    <Col span={11}>\r\n                        <FormItem\r\n                            type=\"select\"\r\n                            {...layout}\r\n                            mode=\"multiple\"\r\n                            label=\"地区维度\"\r\n                            required\r\n                            name=\"region\"\r\n                            options={[\r\n                                {label: '无锡市', value: '无锡市'},\r\n                                {label: '锡山区', value: '锡山区'},\r\n                                {label: '惠山区', value: '惠山区'},\r\n                                {label: '滨湖区', value: '滨湖区'},\r\n                                {label: '梁溪区', value: '梁溪区'},\r\n                                {label: '新吴区', value: '新吴区'},\r\n                            ]}\r\n                        />{' '}\r\n                    </Col>\r\n                    <Col span={11}>\r\n                        <FormItem {...layout} label=\"自定义维度\" name=\"zidingyiweidufenzu\" required noSpace />\r\n                    </Col>\r\n                    <Col span={11}>\r\n                        <FormItem\r\n                            type=\"checkbox-group\"\r\n                            {...layout}\r\n                            label=\"指标配置项\"\r\n                            name=\"zhibiaopeizhixiang\"\r\n                            options={[\r\n                                {label: '同比', value: '同比'},\r\n                                {label: '环比', value: '环比'},\r\n                                {label: '同比增长', value: '同比增长'},\r\n                                {label: '环比增长', value: '环比增长'},\r\n                            ]}\r\n                        />{' '}\r\n                    </Col>\r\n                    <Col span={11}>\r\n                        <FormItem {...layout} label=\"预警阈值\" name=\"yujingyuzhi\" required noSpace />\r\n                    </Col>\r\n                    <Col span={11}>\r\n                        <FormItem type=\"textarea\" {...layout} label=\"指标含义\" name=\"meaning\" />{' '}\r\n                    </Col>\r\n                    <Col span={11}>\r\n                        <FormItem type=\"textarea\" {...layout} label=\"指标计算逻辑\" name=\"zhibiaojisuanluoji\" />{' '}\r\n                    </Col>\r\n                </Row>\r\n            </ModalContent>\r\n        </Form>\r\n    );\r\n});\r\n","import {useState, useMemo, useCallback} from 'react';\r\nimport {Button, Form, Space} from 'antd';\r\nimport {PageContent, QueryBar, FormItem, Table, Pagination, Operator, ToolBar} from '@ra-lib/admin';\r\nimport config from 'src/commons/config-hoc';\r\nimport EditModal from './EditModal';\r\nimport {Router} from 'react-router-dom';\r\nexport default config({\r\n    path: '/indexManage/myIndex',\r\n})(function User(props) {\r\n    const [loading, setLoading] = useState(false);\r\n    const [pageNum, setPageNum] = useState(1);\r\n    const [pageSize, setPageSize] = useState(20);\r\n    const [conditions, setConditions] = useState({});\r\n    const [visible, setVisible] = useState(false);\r\n    const [record, setRecord] = useState(null);\r\n    const [form] = Form.useForm();\r\n\r\n    const params = useMemo(() => {\r\n        return {\r\n            ...conditions,\r\n            pageNum,\r\n            pageSize,\r\n        };\r\n    }, [conditions, pageNum, pageSize]);\r\n\r\n    // 使用现有查询条件，重新发起请求\r\n    const refreshSearch = useCallback(() => {\r\n        setConditions(form.getFieldsValue());\r\n    }, [form]);\r\n\r\n    // 获取列表\r\n    const {data: {dataSource, total} = {}} = props.ajax.useGet('/indexTable/queryListByPage', params, [params], {\r\n        setLoading,\r\n        formatResult: (res) => {\r\n            return {\r\n                dataSource: res?.content || [],\r\n                total: res?.totalElements || 0,\r\n            };\r\n        },\r\n    });\r\n\r\n    // 删除\r\n    const {run: deleteRecord} = props.ajax.useDel('/indexTable/:id', null, {setLoading, successTip: '删除成功！'});\r\n\r\n    function toLink(params) {\r\n        props.history.push({pathname: '/indexManage/myIndex/viewDetails', state: {abc: 45}});\r\n    }\r\n    const columns = [\r\n        {title: '指标名称', dataIndex: 'name'},\r\n        {title: '指标状态', dataIndex: 'status'},\r\n        // { title: '关联专题', dataIndex: 'mobile' },\r\n        {title: '指标来源部门', dataIndex: 'sourceDepart'},\r\n        {title: '指标来源科室', dataIndex: 'sourceKeshi'},\r\n        {title: '指标负责部门', dataIndex: 'fuzeDepart'},\r\n        {title: '指标负责人', dataIndex: 'fuzeren'},\r\n        {title: '负责人联系方式', dataIndex: 'phone'},\r\n        {title: '指标含义', dataIndex: 'meaning'},\r\n        {title: '统计周期', dataIndex: 'tongjizhouqi'},\r\n        {title: '更新时间', dataIndex: 'updatedAt'},\r\n        {\r\n            title: '操作',\r\n            key: 'operator',\r\n            width: 150,\r\n            render: (value, record) => {\r\n                const {id, name} = record;\r\n                const items = [\r\n                    {\r\n                        label: '查看',\r\n                        onClick: () => toLink(record),\r\n                        // onClick: () => setRecord({ ...record, isDetail: true }) || setVisible(true),\r\n                    },\r\n                    {\r\n                        label: '编辑',\r\n                        onClick: () => setRecord(record) || setVisible(true),\r\n                    },\r\n                    {\r\n                        label: '删除',\r\n                        color: 'red',\r\n                        confirm: {\r\n                            title: `您确定删除「${name}」吗？`,\r\n                            onConfirm: () => handleDelete(id),\r\n                        },\r\n                    },\r\n                ];\r\n\r\n                return <Operator items={items} />;\r\n            },\r\n        },\r\n    ];\r\n\r\n    const handleDelete = useCallback(\r\n        async (id) => {\r\n            await deleteRecord(id);\r\n            // 触发列表更新\r\n            refreshSearch();\r\n        },\r\n        [deleteRecord, refreshSearch],\r\n    );\r\n\r\n    const queryItem = {\r\n        style: {width: 200},\r\n    };\r\n    const queryItemDaye = {\r\n        style: {width: 300},\r\n    };\r\n    // 表格多选\r\n    const [selectedRowKeys, setSelectedRowKeys] = useState([]);\r\n    const handleSelectedRowKeysChange = useCallback((selectedRowKeys) => {\r\n        setSelectedRowKeys(selectedRowKeys);\r\n    }, []);\r\n\r\n    return (\r\n        <PageContent loading={loading}>\r\n            <QueryBar>\r\n                <Form\r\n                    name=\"indexTable\"\r\n                    layout=\"inline\"\r\n                    form={form}\r\n                    initialValues={{position: '01'}}\r\n                    onFinish={(values) => setPageNum(1) || setConditions(values)}\r\n                >\r\n                    <FormItem {...queryItem} label=\"指标名称\" name=\"name\" />\r\n                    <FormItem {...queryItem} label=\"负责部门\" name=\"fuzeDepart\" />\r\n                    <FormItem {...queryItem} label=\"指标状态\" name=\"status\" />\r\n\r\n                    <FormItem>\r\n                        <Space>\r\n                            <Button type=\"primary\" htmlType=\"submit\">\r\n                                查询\r\n                            </Button>\r\n                            <Button onClick={() => form.resetFields()}>重置</Button>\r\n                        </Space>\r\n                    </FormItem>\r\n                </Form>\r\n            </QueryBar>\r\n            <ToolBar>\r\n                <Button type=\"primary\" onClick={() => setRecord(null) || setVisible(true)}>\r\n                    新增指标\r\n                </Button>\r\n                <Button danger onClick={() => setRecord(null) || setVisible(true)}>\r\n                    批量删除\r\n                </Button>\r\n            </ToolBar>\r\n            <Table\r\n                pageNum={pageNum}\r\n                pageSize={pageSize}\r\n                fitHeight\r\n                dataSource={dataSource}\r\n                columns={columns}\r\n                rowSelection={{\r\n                    selectedRowKeys: selectedRowKeys,\r\n                    onChange: handleSelectedRowKeysChange,\r\n                }}\r\n                rowKey=\"id\"\r\n            />\r\n            <Pagination\r\n                total={total}\r\n                pageNum={pageNum}\r\n                pageSize={pageSize}\r\n                onPageNumChange={setPageNum}\r\n                onPageSizeChange={(pageSize) => setPageNum(1) || setPageSize(pageSize)}\r\n            />\r\n            <EditModal\r\n                visible={visible}\r\n                record={record}\r\n                isEdit={!!record}\r\n                onOk={() => setVisible(false) || refreshSearch()}\r\n                onCancel={() => setVisible(false)}\r\n            />\r\n        </PageContent>\r\n    );\r\n});\r\n","import '../../style/default.less'; // style dependencies\n// deps-lint-skip: grid\n\nimport '../../grid/style';","import '../../style/default.less'; // style dependencies\n// deps-lint-skip: grid\n\nimport '../../grid/style';","import { Row } from '../grid';\nexport default Row;","import { Col } from '../grid';\nexport default Col;"],"sourceRoot":""}